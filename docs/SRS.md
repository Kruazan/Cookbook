# Кулинарная книга / Менеджер рецептов - Системные требования

## 1 Введение

### 1.1 Назначение

В этом документе описаны **функциональные и нефункциональные требования** к клиент-серверному веб-приложению «Моя кулинарная книга». Приложение предназначено для хранения, систематизации и управления кулинарными рецептами. Документ разработан для команды, которая будет заниматься реализацией и тестированием приложения.

### 1.2 Бизнес-требования

#### 1.2.1 Исходные данные

Многие люди увлекаются кулинарией и собирают рецепты из различных источников: сайтов, блогов, кулинарных книг, заметок от друзей и родственников. Рецепты часто хранятся в неструктурированном виде — в закладках браузера, на бумажных носителях, в фотографиях, что затрудняет их быстрый поиск и использование. Это приводит к потере времени, повторному поиску уже известных рецептов и сложностям с планированием покупок.

#### 1.2.2 Возможности бизнеса

Создание приложения, которое позволит пользователям хранить все рецепты в одном месте, систематизировать их по категориям и тегам, быстро находить нужные рецепты и даже формировать список покупок, удовлетворит потребность многих домашних кулинаров. Удобный и интуитивно понятный интерфейс сделает процесс готовки более организованным и приятным, а возможность импорта рецептов с популярных сайтов сэкономит пользователям время.

#### 1.2.3 Границы проекта

Приложение «Моя кулинарная книга» позволит пользователям создавать, импортировать, редактировать, искать и систематизировать рецепты. Приложение будет состоять из серверной части на ASP.NET Core и клиентского веб-интерфейса.

### 1.3 Аналоги

Существующие решения, такие как **Paprika Recipe Manager** или **CopyMeThat**, предлагают функционал для сохранения рецептов. Однако многие из них являются платными, не имеют открытого исходного кода или не поддерживают удобный импорт рецептов с русскоязычных сайтов. Некоторые аналоги не предоставляют полноценной клиент-серверной архитектуры с возможностью синхронизации между устройствами.

---

## 2 Требования пользователя

### 2.1 Программные интерфейсы

*   Приложение будет использовать протокол **HTTP/REST** для связи между клиентом и сервером.
*   Для импорта рецептов с внешних сайтов будет использоваться **парсинг HTML** (с помощью библиотек, таких как HtmlAgilityPack) или, при наличии, публичные API кулинарных сайтов.
*   Для аутентификации будет использоваться **JWT (JSON Web Tokens)**.

### 2.2 Интерфейс пользователя

*   **Окно аутентификации**: Позволяет пользователю войти или зарегистрироваться.
*   **Главная страница**: Отображает коллекцию рецептов пользователя. Предусмотрены виджеты для быстрого доступа к последним добавленным рецептам, избранному и рецептам по категориям.
*   **Страница рецепта**: Детальное отображение рецепта: название, изображение, ингредиенты, пошаговое описание, категории и теги.
*   **Страница создания/редактирования рецепта**: Форма для ввода или изменения данных рецепта.
*   **Страница поиска и фильтрации**: Позволяет искать рецепты по названию, ингредиентам, а также фильтровать по категориям, тегам и другим параметрам.
*   **Страница импорта**: Поле для ввода URL рецепта со стороннего сайта для его автоматического парсинга и добавления.

### 2.3 Характеристики пользователей

#### 2.3.1 Классы пользователей

| Класс пользователей | Описание |
| :--- | :--- |
| **Зарегистрированный пользователь** | Пользователь, который создал учётную запись. Имеет доступ к полному функционалу приложения: создание, редактирование, удаление, импорт, поиск и систематизация рецептов. |
| **Гость** | Пользователь без учётной записи. Может просматривать публичные рецепты (если функционал будет реализован в будущем). |

#### 2.3.2 Аудитория приложения

##### 2.3.2.1 Целевая аудитория

*   Домашние кулинары, желающие систематизировать свою коллекцию рецептов.
*   Люди, которые следят за питанием и планируют своё меню.
*   Начинающие повара, собирающие свою базу знаний.

##### 2.3.2.2 Побочная аудитория

*   Food-блогеры, ведущие свой архив рецептов.
*   Люди, которые хотят поделиться своими рецептами с друзьями и семьёй.

### 2.4 Предположения и зависимости

*   Пользователь вводит данные о рецептах самостоятельно или импортирует их из доверенных источников. Приложение не гарантирует точность импортированных данных.
*   Для импорта рецептов требуется, чтобы структура исходного сайта не менялась кардинальным образом.
*   Приложение не является источником кулинарных знаний, а является инструментом для их организации.

---

## 3 Системные требования

### 3.1 Функциональные требования

#### 3.1.1 Основные функции

##### 3.1.1.1 Аутентификация и авторизация пользователя
*Остаётся без изменений, как в предыдущем варианте.*

##### 3.1.1.2 Создание рецепта из функциональных блоков
**Описание**: Пользователь должен иметь возможность создавать рецепт как последовательность настраиваемых блоков. Каждый блок представляет собой шаг или группу шагов в приготовлении.

**Требования**:
- **Добавление блоков**: Пользователь может добавлять в рецепт неограниченное количество блоков различных типов
- **Типы блоков**:
  - **Текстовый блок**: Блок для ввода описания шага (например, "Нарежьте лук кубиками")
  - **Блок ингредиентов**: Блок для списка ингредиентов, требуемых на данном этапе. Для каждого ингредиента можно указать название и количество
  - **Таймер-блок**: Блок, который запускает таймер обратного отсчета прямо в интерфейсе рецепта. Пользователь задаёт название шага (например, "Выпекать") и время
- **Управление порядком**: Пользователь может менять порядок блоков в рецепте с помощью Drag&Drop
- **Редактирование**: Пользователь может редактировать содержание любого блока
- **Удаление**: Пользователь может удалить любой блок из рецепта

##### 3.1.1.3 Режим готовки
**Описание**: Специальный режим просмотра рецепта, оптимизированный для использования непосредственно во время приготовления блюда.

**Требования**:
- **Пошаговое отображение**: Рецепт отображается как последовательность блоков, крупно и читаемо. Пользователь может пролистывать шаги
- **Запуск таймеров**: Нажатие на кнопку в *таймер-блоке* запускает обратный отсчёт. По истечении времени должно появляться уведомление (звуковое и/или браузерное)
- **Отметка о выполнении**: Пользователь может отмечать завершённые шаги (блоки) как выполненные (например, галочкой)
- **Прогресс**: Отображение общего прогресса по рецепту (например, "Шаг 3 из 8")

##### 3.1.1.4 Управление рецептами (CRUD)
**Описание**: Пользователь должен иметь возможность просматривать, редактировать и удалять свои рецепты.

**Требования**:
- **Просмотр (в режиме редактирования)**: Просмотр рецепта в виде структуры блоков для общего обзора
- **Редактирование**: Возврат в режим редактирования из режима просмотра
- **Удаление**: Возможность удалить весь рецепт

##### 3.1.1.5 Поиск и фильтрация
**Описание**: Пользователь должен иметь возможность находить рецепты по различным критериям.

**Требования**:
- **Поиск**: Полнотекстовый поиск по названию рецепта и тексту внутри текстовых блоков
- **Фильтрация**: Фильтрация рецептов по категориям, тегам (например, #десерт, #наужин)

#### 3.1.2 Ограничения и исключения
- Функция импорта с других сайтов может быть реализована как отдельный, изолированный функционал, который преобразует распарсенный текст в набор блоков
- Таймеры требуют активной вкладки браузера для точного отсчёта времени (или использования Background Tasks API/Web Workers для большей точности в фоне)

---

### 3.2 Нефункциональные требования

#### 3.2.1 Атрибуты качества

##### 3.2.1.1 Требования к удобству использования

*   Интерфейс должен быть интуитивно понятным, простым и визуально приятным.
*   Добавление и импорт рецепта должны занимать минимальное количество действий.
*   Приложение должно предоставлять обратную связь пользователю (уведомления об успешном сохранении, ошибках при импорте).

##### 3.2.1.2 Требования к безопасности

*   Пароли пользователей должны храниться в хэшированном виде.
*   Все запросы к API должны аутентифицироваться с использованием JWT-токенов.
*   Необходима защита от распространённых уязвимостей (SQL-инъекции, XSS).

##### 3.2.1.3 Требования к производительности

*   Время загрузки списка рецептов не должно превышать 2 секунд.
*   Поиск и фильтрация по коллекции должны работать без задержек.

#### 3.2.2 Внешние интерфейсы

*   **Пользовательский интерфейс**: Клиентская часть будет реализована как одностраничное приложение (SPA) с использованием современного JavaScript-фреймворка (например, React или Angular) или с помощью серверного рендеринга Razor Pages.
*   **Серверное API**: RESTful API, возвращающее данные в формате JSON.

#### 3.2.3 Ограничения

*   Серверная часть должна быть реализована на **C# ASP.NET Core**.
*   Для хранения данных будет использоваться реляционная база данных (**PostgreSQL** или **SQL Server**).
*   Клиентская часть должна корректно работать в последних версиях современных браузеров (Chrome, Firefox, Safari, Edge).

---

## 4 Эскизы интерфейса

### 4.1 Главный экран

<img width="1261" height="707" alt="image" src="https://github.com/user-attachments/assets/c13d38fc-41af-4472-84c7-bdaed98ecd02" />

### 4.2 Окно регистрации

<img width="1254" height="707" alt="image" src="https://github.com/user-attachments/assets/181e82a2-b8fe-4be5-8a6c-ce973f3e5b67" />

### 4.3 Окно входа

<img width="1260" height="708" alt="image" src="https://github.com/user-attachments/assets/da375e36-ccc3-4d25-b1b8-2b3711123506" />

### 4.4 Окно создания рецепта

<img width="1259" height="709" alt="image" src="https://github.com/user-attachments/assets/fc02c83e-81f4-48e1-8508-af31a758b34d" />

### 4.5 Окно добавления операции

<img width="1258" height="709" alt="image" src="https://github.com/user-attachments/assets/341620c2-8bd6-44e9-97e4-3968a83a6ae6" />

### 4.6 Окно приготовления

<img width="1257" height="708" alt="image" src="https://github.com/user-attachments/assets/087bbfd7-ce2c-4cbd-afa1-0c9d2d73dad0" />

---

## 5 Технологический стек

| Компонент | Технология |
| :--- | :--- |
| **Backend Framework** | ASP.NET Core 8 |
| **База данных** | PostgreSQL |
| **ORM** | Entity Framework Core |
| **Аутентификация** | JWT Bearer Tokens |
| **Парсинг (Импорт)** | HtmlAgilityPack |
| **Клиентский UI** | React / Angular **или** Razor Pages |
| **Тестирование** | xUnit, NUnit, Moq |
| **Документация API** | Swagger/OpenAPI |
| **Логирование** | Serilog |

---

## 6 Безопасность

*   Все входящие данные должны валидироваться на стороне сервера.
*   Для защиты от CSRF-атак будет использоваться генерация и проверка токенов (если используется Razor Pages) или корректная конфигурация CORS (если используется SPA).
*   Пароли должны хэшироваться с использованием алгоритма BCrypt или PBKDF2.
*   Доступ к API должен быть защищён с помощью JWT.

---

## 7 Тестирование

*   **Модульное тестирование (Unit Tests)**: Тестирование сервисов, репозиториев и вспомогательных классов.
*   **Интеграционное тестирование**: Тестирование API-эндпоинтов и взаимодействия с базой данных.
*   **Тестирование парсера**: Проверка корректности импорта рецептов с различных сайтов.
*   **Нагрузочное тестирование**: Проверка производительности при работе с большим количеством рецептов.

---

## 8 Развёртывание

*   Приложение должно быть готово к развёртыванию в контейнерах **Docker**.
*   Должна быть предусмотрена поддержка различных сред выполнения (Environment): `Development`, `Staging`, `Production`.
*   Конфигурация (строки подключения к БД, ключи) должна управляться через переменные окружения или внешние конфигурационные файлы.
*   Целевой платформой для развёртывания может быть **Linux-сервер** с Kestrel или облачная платформа (**Azure**, **AWS**).
